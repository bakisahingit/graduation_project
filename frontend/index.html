<!doctype html>
<html lang="tr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>Havalı Chat</title>
	<link rel="stylesheet" href="css/main.css">
	<!-- Prism.js stylesheet for beautiful code highlighting -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css">
</head>
<body>
	<div class="app-root">
		<!-- Sidebar -->
		<div class="sidebar" id="sidebar">
			<div class="sidebar-header">
				<button class="new-chat-btn" id="new-chat-btn">
					<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
					</svg>
					Yeni Sohbet
				</button>
				<button class="settings-btn" id="settings-btn">
					<img src="assets/settings.svg" alt="Ayarlar" class="btn-icon">
				</button>
			</div>
			
			<!-- Model selector moved to input wrapper -->
			
			<!-- Molecule drawer moved to input wrapper -->
			
			<div class="pinned-conversations" id="pinned-conversations">
				<div class="history-title">Pinned</div>
				<div class="history-list" id="pinned-list">
					<!-- Pinned conversations will be populated here -->
				</div>
			</div>
			
			<div class="conversation-history" id="conversation-history">
				<div class="history-title">Konuşma Geçmişi</div>
				<div class="history-list" id="history-list">
					<!-- Conversation history will be populated here -->
				</div>
			</div>
		</div>

		<!-- Main content area -->
		<div class="main-content">
			<!-- Initial welcome screen -->
			<div class="welcome-screen" id="welcome-screen">
			<div class="welcome-content">
				<h1 class="welcome-title">Havalı Chat</h1>
				<form id="welcome-form" class="welcome-input-wrapper">
					<div class="input-area">
						<textarea id="welcome-input" placeholder="Bir şey yazın... Enter ile gönder, Shift+Enter ile alt satıra" aria-label="Havalı giriş" rows="1"></textarea>
					</div>
					<div class="input-divider"></div>
					<div class="input-actions">
						<div class="left-buttons">
							<button type="button" class="add-btn" id="welcome-add-btn">
								<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
									<path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								</svg>
							</button>
							<div class="panel-container add-dropdown" id="welcome-add-dropdown">
								<div class="panel-content add-options">
									<button class="panel-item add-option" id="welcome-file-upload">
										<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
											<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
											<polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
											<line x1="16" y1="13" x2="8" y2="13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
											<line x1="16" y1="17" x2="8" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
											<polyline points="10,9 9,9 8,9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
										</svg>
										Dosya Ekle
									</button>
									<button class="panel-item add-option" id="welcome-molecule-draw">
										<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
											<path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
											<path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
											<path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
										</svg>
										Molekül Çiz
									</button>
								</div>
							</div>
							<button type="button" class="tools-btn" id="welcome-tools-btn">
								<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
									<path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								</svg>
								Tools
							</button>
							<div class="panel-container tools-dropdown" id="welcome-tools-dropdown">
								<div class="panel-content tools-options">
									<button class="panel-item tool-option" id="welcome-admet-tool">
										<svg class="tool-option-icon" viewBox="0 0 32 32" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
											<path d="M 14 5 C 12.90625 5 12 5.90625 12 7 L 12 8 L 6 8 C 4.355469 8 3 9.355469 3 11 L 3 26 L 29 26 L 29 11 C 29 9.355469 27.644531 8 26 8 L 20 8 L 20 7 C 20 5.90625 19.09375 5 18 5 Z M 14 7 L 18 7 L 18 8 L 14 8 Z M 6 10 L 26 10 C 26.566406 10 27 10.433594 27 11 L 27 24 L 5 24 L 5 11 C 5 10.433594 5.433594 10 6 10 Z M 15 13 L 15 16 L 12 16 L 12 18 L 15 18 L 15 21 L 17 21 L 17 18 L 20 18 L 20 16 L 17 16 L 17 13 Z" fill="currentColor"/>
										</svg>
										AdMet
									</button>
									<button class="panel-item tool-option" id="welcome-compare-tool">
										<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 20V10M12 20V4M6 20V14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
										Molekül Karşılaştır
									</button>
								</div>
							</div>
						</div>
						<div class="right-buttons">
							<div class="model-selector-input">
								<div class="custom-select-input" id="custom-model-select-welcome">
									<div class="select-trigger-input" id="select-trigger-welcome">
										<span class="select-value-input">Model</span>
										<svg class="select-arrow-input" width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
											<polyline points="6,9 12,15 18,9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
										</svg>
									</div>
									<div class="panel-container select-options-input" id="select-options-welcome">
										<!-- Options will be populated by JavaScript -->
									</div>
								</div>
								<select id="model-select-welcome" aria-label="Model seçin" style="display: none;"></select>
							</div>
							<button type="submit" id="welcome-send-btn" class="send-btn">
								<img src="../assets/send.svg" alt="Gönder" class="btn-icon">
							</button>
						</div>
					</div>
				</form>
			</div>
		</div>

		<!-- Chat interface (hidden initially) -->
		<div class="chat-interface" id="chat-interface" style="display: none;">
			<div class="messages-container">
				<div class="messages" id="messages" aria-live="polite"></div>
			</div>
			<div class="input-container">
				<form id="chat-form" class="input-wrapper">
					<div class="input-area">
						<textarea id="chat-input" placeholder="Bir şey yazın... Enter ile gönder, Shift+Enter ile alt satıra" aria-label="Havalı giriş" rows="1"></textarea>
					</div>
					<div class="input-divider"></div>
					<div class="input-actions">
						<div class="left-buttons">
							<button type="button" class="add-btn" id="chat-add-btn">
								<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
									<path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								</svg>
							</button>
							<div class="panel-container add-dropdown" id="chat-add-dropdown">
								<div class="panel-content add-options">
									<button class="panel-item add-option" id="chat-file-upload">
										<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
											<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
											<polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
											<line x1="16" y1="13" x2="8" y2="13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
											<line x1="16" y1="17" x2="8" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
											<polyline points="10,9 9,9 8,9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
										</svg>
										Dosya Ekle
									</button>
									<button class="panel-item add-option" id="chat-molecule-draw">
										<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
											<path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
											<path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
											<path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
										</svg>
										Molekül Çiz
									</button>
								</div>
							</div>
							<button type="button" class="tools-btn" id="chat-tools-btn">
								<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
									<path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								</svg>
								Tools
							</button>
							<div class="panel-container tools-dropdown" id="chat-tools-dropdown">
								<div class="panel-content tools-options">
									<button class="panel-item tool-option" id="chat-admet-tool">
										<svg class="tool-option-icon" viewBox="0 0 32 32" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
											<path d="M 14 5 C 12.90625 5 12 5.90625 12 7 L 12 8 L 6 8 C 4.355469 8 3 9.355469 3 11 L 3 26 L 29 26 L 29 11 C 29 9.355469 27.644531 8 26 8 L 20 8 L 20 7 C 20 5.90625 19.09375 5 18 5 Z M 14 7 L 18 7 L 18 8 L 14 8 Z M 6 10 L 26 10 C 26.566406 10 27 10.433594 27 11 L 27 24 L 5 24 L 5 11 C 5 10.433594 5.433594 10 6 10 Z M 15 13 L 15 16 L 12 16 L 12 18 L 15 18 L 15 21 L 17 21 L 17 18 L 20 18 L 20 16 L 17 16 L 17 13 Z" fill="currentColor"/>
										</svg>
										AdMet
									</button>
									<button class="panel-item tool-option" id="chat-compare-tool">
										<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 20V10M12 20V4M6 20V14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
										Molekül Karşılaştır
									</button>
								</div>
							</div>
						</div>
						<div class="right-buttons">
							<div class="model-selector-input">
								<div class="custom-select-input" id="custom-model-select-chat">
									<div class="select-trigger-input" id="select-trigger-chat">
										<span class="select-value-input">Model</span>
										<svg class="select-arrow-input" width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
											<polyline points="6,9 12,15 18,9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
										</svg>
									</div>
									<div class="panel-container select-options-input" id="select-options-chat">
										<!-- Options will be populated by JavaScript -->
									</div>
								</div>
								<select id="model-select-chat" aria-label="Model seçin" style="display: none;"></select>
							</div>
							<button type="submit" id="chat-send-btn" class="send-btn">
								<img src="../assets/send.svg" alt="Gönder" class="btn-icon">
							</button>
						</div>
					</div>
				</form>
			</div>
		</div>
		</div>
	</div>

	<!-- Settings Modal -->
	<div class="settings-modal" id="settings-modal">
		<div class="settings-overlay" id="settings-overlay"></div>
		<div class="settings-content">
			<div class="settings-header">
				<h2 class="settings-title">Ayarlar</h2>
				<button class="settings-close" id="settings-close">
					<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
					</svg>
				</button>
			</div>
			<div class="settings-navigation">
				<button class="settings-nav-btn active" data-tab="models">Modeller</button>
			</div>
			<div class="settings-body">
				<div class="settings-tab active" id="models-tab">
					<div class="models-search-container">
						<input type="text" id="models-search" class="models-search" placeholder="Model ara..." autocomplete="off">
					</div>
					<div class="models-list" id="models-list">
						<!-- Models will be populated by JavaScript -->
					</div>
				</div>
			</div>
		</div>
	</div>


	<!-- Molecule Drawer Modal -->
	<div class="molecule-modal" id="molecule-modal">
		<div class="molecule-overlay" id="molecule-overlay"></div>
		<div class="molecule-content">
			<div class="molecule-header">
				<h2 class="molecule-title">Molekül Çizici</h2>
				<button class="molecule-close" id="molecule-close">
					<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
					</svg>
				</button>
			</div>
			<div class="molecule-body">
				<div class="molecule-panel">
					<div class="molecule-display" id="molecule-display">
						<div class="molecule-placeholder" id="molecule-placeholder">
							<svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								<path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								<path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
							</svg>
							<p>Molekül yapısı burada görünecek</p>
							<p class="placeholder-hint">SMILES formatında bir molekül girin (örn: CCO, C1=CC=CC=C1)</p>
						</div>
						<canvas id="molecule-canvas" width="400" height="300" style="display: none;"></canvas>
						<div class="molecule-error" id="molecule-error" style="display: none;">
							<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
								<circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
								<line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2"/>
								<line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2"/>
							</svg>
							<p>Geçersiz SMILES formatı</p>
						</div>
					</div>
				</div>
				<div class="smiles-input-section">
					<label for="smiles-input" class="smiles-label">SMILES Formatı:</label>
					<textarea id="smiles-input" class="smiles-textarea" placeholder="Molekülün SMILES formatını buraya yazın... (örn: CCO, C1=CC=CC=C1)" rows="3"></textarea>
					<div class="molecule-actions">
						<button class="molecule-action-btn" id="clear-molecule">Temizle</button>
						<button class="molecule-action-btn primary" id="insert-molecule">Sohbete Ekle</button>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Context Menu for Conversation History -->
	<div class="conversation-menu" id="conversation-menu">
		<button class="menu-item" id="menu-pin">
			<span class="menu-icon">
				<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M11.9999 17V21M6.9999 12.6667V6C6.9999 4.89543 7.89533 4 8.9999 4H14.9999C16.1045 4 16.9999 4.89543 16.9999 6V12.6667L18.9135 15.4308C19.3727 16.094 18.898 17 18.0913 17H5.90847C5.1018 17 4.62711 16.094 5.08627 15.4308L6.9999 12.6667Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
				</svg>
			</span>
			<span class="menu-text">Pin</span>
		</button>
		<button class="menu-item" id="menu-rename">
			<span class="menu-icon">
				<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
					<path d="m18.5 2.5 3 3L12 15l-4 1 1-4 9.5-9.5z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
				</svg>
			</span>
			<span class="menu-text">Rename</span>
		</button>
		<button class="menu-item delete" id="menu-delete">
			<span class="menu-icon">
				<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
					<polyline points="3,6 5,6 21,6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
					<path d="m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
					<line x1="10" y1="11" x2="10" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
					<line x1="14" y1="11" x2="14" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
				</svg>
			</span>
			<span class="menu-text">Delete</span>
		</button>
	</div>

    <!-- Comparison Modal -->
    <div class="modal" id="compare-modal">
        <div class="modal-overlay" id="compare-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Molekülleri Karşılaştır</h2>
                <button class="modal-close" id="compare-close">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </button>
            </div>
            <div class="modal-body">
                <p class="modal-description">Karşılaştırmak istediğiniz moleküllerin SMILES veya isimlerini her satıra bir tane olacak şekilde girin.</p>
                <textarea id="compare-input" class="compare-textarea" placeholder="Kafein
CCO
C1=CC=CC=C1" rows="5"></textarea>
                <div class="modal-actions">
                    <button class="modal-action-btn primary" id="run-comparison">Karşılaştırmayı Başlat</button>
                </div>
            </div>
        </div>
    </div>

	<!-- Charting Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- PDF Export Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>

	<!-- Markdown renderer, sanitizer and syntax highlighter -->
	<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/dompurify@2.3.8/dist/purify.min.js"></script>
	<!-- Custom molecule visualization system -->
	<!-- Prism.js for beautiful code highlighting -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
	<script type="module" src="js/main.js"></script>
</body>
</html>